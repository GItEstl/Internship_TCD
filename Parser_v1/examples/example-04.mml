func void main (int a) {
def
    channel int c;
    int i
in
    i = a;
    c = newChan();
    choose {
        | i = receive(c) -> {i = i + 1}
        | send(i,c) -> {i = 0}
        | spawn main(2) -> {i = a - 1}
        | tau -> {i = i +1}
    };;;
}

start main(0)